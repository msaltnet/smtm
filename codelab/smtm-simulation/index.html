<!doctype html>

<html>

<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WKGHCPMD');</script>
  <!-- End Google Tag Manager -->
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>CodeLab to Install smtm and Run a trading simulation</title>
  <link rel="stylesheet"
    href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/claat-public/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }

    .error {
      color: red;
    }
  </style>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-CBWCD0B30G"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-CBWCD0B30G');
  </script>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WKGHCPMD"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <google-codelab codelab-gaid="" id="smtm-simulation" title="CodeLab to Install smtm and Run a trading simulation"
    environment="web" feedback-link="https://github.com/msaltnet/smtm">

    <google-codelab-step label="CodeLab Overview" duration="2">
      <p>이 코드랩에서는 암호화폐 자동매매 시스템 오픈소스 프로젝트 smtm를 설치하고, 트레이딩 시뮬레이션을 실행하는 방법에 대해서 설명하고 있습니다.</p>
      <h2 is-upgraded>사전 준비</h2>
      <ol type="1">
        <li>python (3.6 이상 권장)</li>
        <li>Upbit에 접속 가능한 인터넷 환경 (시뮬레이션 데이터 다운로드)</li>
      </ol>
      <p>Upbit 계좌나 계정은 없어도 됩니다</p>
      <h2 is-upgraded>배우게 될 것</h2>
      <ol type="1">
        <li>pip를 사용해서 smtm을 설치하는 방법</li>
        <li>설치한 smtm을 사용하여 트레이딩 시뮬레이션 하는 방법</li>
        <li>smtm 시뮬레이션 결과 확인</li>
      </ol>
      <p class="image-container"><img alt="시뮬레이션 결과 화면" src="img\\dd8b8708f4399a8d.jpg"></p>


    </google-codelab-step>

    <google-codelab-step label="smtm 설치" duration="2">
      <p>smtm은 암호화폐 자동매매 오픈소스 프로젝트로써 깃허브에 <a href="https://github.com/msaltnet/smtm" target="_blank">소스코드</a>가 공개되어
        있습니다. 또한 <a href="https://pypi.org/project/smtm/" target="_blank">pypi.org</a>에 패키지가 등록되어 있습니다.</p>
      <p>python이 설치된 환경에서 python 패키지 관리 프로그램 pip를 통해서 smtm 패키지를 설치합니다.</p>
      <pre><code>(venv) PS C:\smtm&gt; pip install smtm
Collecting smtm
  Downloading smtm-1.2.0-py3-none-any.whl (80 kB)
     |████████████████████████████████| 80 kB 5.5 MB/s
Requirement already satisfied: pyjwt in c:\venv\lib\site-packages (from smtm) (2.0.1)
Requirement already satisfied: python-dotenv in c:\venv\lib\site-packages (from smtm) (0.19.0)
Requirement already satisfied: requests in c:\venv\lib\site-packages\requests-2.25.0-py3.6.egg (from smtm) (2.25.0)
...
Installing collected packages: smtm
Successfully installed smtm-1.2.0
(venv) PS C:\smtm&gt; 
</code></pre>
      <aside class="special">
        <p> 효과적인 패키지 관리를 위해서 <a
            href="https://packaging.python.org/en/latest/guides/installing-using-pip-and-virtual-environments/#creating-a-virtual-environment"
            target="_blank">virtual environment</a>을 사용할 것을 권장합니다. </p>
      </aside>
      <p>pip를 사용하지 않고 소스코드와 패키지를 깃허브에서 다운로드하여 사용할 수도 있습니다.</p>
      <p><a href="https://github.com/msaltnet/smtm" target="_blank">github smtm repo</a>에 접속해서 <a
          href="https://github.com/msaltnet/smtm#%EC%84%A4%EC%B9%98%EB%B0%A9%EB%B2%95" target="_blank">설치방법</a>을 확인해
        보세요.</p>


    </google-codelab-step>

    <google-codelab-step label="트레이딩 시뮬레이션 실행" duration="3">
      <p>smtm에서 트레이딩은 Data Provider, Strategy, Trader 모듈이 순차적으로 동작하면서 진행됩니다. 기본적으로 트레이딩은 1분 간격으로 반복 수행되며, 시뮬레이션에서는 분봉을
        사용합니다.</p>
      <p class="image-container"><img alt="자동 거래 시퀀스 다이어그램" src="img\\b66e7a3892854654.png"></p>
      <p>smtm 시스템에서 제공하는 트레이딩 시뮬레이션은 Upbit의 거래 정보를 사용해서 진행됩니다. Upbit Open API를 사용하여 데이터를 다운로드하고, 전략 모듈에 따라서 트레이딩 시뮬레이션이
        진행됩니다.</p>
      <p><em>Upbit Open API</em> 중 거래 데이터 조회는 특별한 권한이 필요없기 때문에 계좌 정보등의 별도 정보가 필요하지 않습니다.</p>
      <p>시뮬레이션에 필요한 파라미터 값은 다음과 같습니다.</p>
      <ul>
        <li>budget: 예산 정보</li>
        <li>from_dash_to: 기간 정보 년월일.시분초 또는 년월일 예) 201220.170000-201221</li>
        <li>term: 반복시간으로 시뮬레이션에서는 0.1 권장</li>
        <li>strategy: 사용할 전략 코드 예) BNH, SMA, SML</li>
        <li>currency: 거래할 암호화폐 예) BTC</li>
      </ul>
      <p>현재 기본 제공되는 전략은 다음과 같으며, 전략은 직접 구현/최적화하여 사용해야 합니다.</p>
      <ul>
        <li>BNH: Buy and Hold 단순 분할 매수</li>
        <li>SMA: Simple Moving Average 단순 이동 평균선 전략</li>
        <li>SML: SMA + ML 단순 이동 평균선 전략에 Machine Learning 도입</li>
      </ul>
      <p>현재 지원하는 암호화폐는 KRW-BTC, KRW-ETH, KRW-DOGE, KRW-XRP이 있으며, 필요에 따라 직접 추가가능합니다. <a
          href="https://youtu.be/UikVC3b-j2M" target="_blank">코인 추가하는 방법 영상</a>을 보시면 간단하게 가능할 수 있습니다.</p>
      <pre><code>python -m smtm --mode 1 --budget 500000 --from_dash_to 230112.190000-230113.070000 --term 0.1 --strategy SMA --currency BTC
</code></pre>
      <p>위의 명령어를 사용해서 시뮬레이션을 실행할 경우 다음과 같이 시뮬레이션이 수행되는 것을 확인 할 수 있습니다.</p>
      <pre><code>(venv) PS C:\01_Code\smtm&gt; python -m smtm --mode 1 --budget 500000 --from_dash_to 230112.190000-230113.070000 --term 0.1 --strategy SMA --currency BTC
...
2023-05-29 09:49:07,364 DEBUG             Analyzer - yield record KRW-BTC, buy_avg: 22744000.0, 23621000.0, 0.0, 3.856
2023-05-29 09:49:07,364 DEBUG             Analyzer - price change ratio 22779000.0 -&gt; 23621000.0, 3.696%
2023-05-29 09:49:07,365  INFO             Analyzer - cumulative_return 500000 -&gt; 509381.0, 1.876%
2023-05-29 09:49:07,365  INFO             Analyzer - ### Return Report ===============================
2023-05-29 09:49:07,365  INFO             Analyzer - Property                     500000 -&gt;     509381
2023-05-29 09:49:07,365  INFO             Analyzer - Gap                                          9381
2023-05-29 09:49:07,366  INFO             Analyzer - Cumulative return                         1.876 %
2023-05-29 09:49:07,366  INFO             Analyzer - Price_change_ratio {&#39;KRW-BTC&#39;: 3.696}
2023-05-29 09:49:07,366  INFO             Analyzer - Period 2023-01-12T19:00:00 - 2023-01-13T06:59:00
2023-05-29 09:49:08,168  INFO             Analyzer - &#34;output/SIM-SMA-230112.190000-230113.070000.jpg&#34; graph file created!
2023-05-29 09:49:08,168 DEBUG   SimulationOperator - ############# Simulation trading is completed
2023-05-29 09:49:08,168 DEBUG   SimulationOperator - start timer False : simulation_terminated : 33684
2023-05-29 09:49:08,169 DEBUG      Operator-Worker - Worker[Operator-Worker:33684] WAIT ==========
2023-05-29 09:49:08,206  INFO            Simulator - Terminating......
Terminating......
2023-05-29 09:49:08,206  INFO            Simulator - 프로그램을 재시작하려면 초기화하세요
프로그램을 재시작하려면 초기화하세요
2023-05-29 09:49:08,207  INFO            Simulator - Good Bye~
Good Bye~
</code></pre>


    </google-codelab-step>

    <google-codelab-step label="시뮬레이션 결과 확인" duration="3">
      <p>시뮬레이션 결과 보고서 파일은 <code>output</code> 폴더에 저장됩니다. <code>SIM-SMA-230112.190000-230113.070000.txt</code> 파일에는 모든 거래
        정보 내역을 포함해서 전체 거래 요약 정보를 제공합니다.</p>
      <p><code>{'KRW-BTC': 3.696}</code> 시뮬레이션 기간 동안 대상 암호화폐는 3.696% 상승했으며, 최종 누적 수익률은 1.876% 입니다. 50만원을 투자해서 하루만에
        9381원을 벌었네요. 5회 거래 시도를 했으며 4회 거래가 이뤄졌습니다.</p>
      <pre><code>### SUMMARY =======================================
Property                     500000 -&gt;     509381
Gap                                          9381
Cumulative return                         1.876 %
Price_change_ratio {&#39;KRW-BTC&#39;: 3.696}
### DEBUG INFO ====================================
memory usage:  143.53516 MB
request_list: 5
result_list: 4
info_list: 720
asset_info_list: 362
score_list: 362
</code></pre>
      <p><code>SIM-SMA-230112.190000-230113.070000.jpg</code> 파일에는 그래프가 저장됩니다. Analyzer 모듈에 설정된 이동평균선이 그려지고, 전략에서 지정한
        위치에 녹색 스팟이 그려집니다. 파란색 삼각형은 매수 지점이며, 노란색은 매도 지점입니다.</p>
      <p>아래쪽 그래프는 거래량과 누적 수익률이며, 붉은 직선은 평균 매수 가격입니다.</p>
      <p>그래프를 통해서 한 눈에 결과를 확인 할 수 있습니다.😀</p>
      <p class="image-container"><img alt="시뮬레이션 결과 화면" src="img\\dd8b8708f4399a8d.jpg"></p>
      <p>그래프에 녹색 스팟을 추가하는 방법은 <a href="https://youtu.be/FR14ZodyDqA" target="_blank">smtm 사용팁 - 그래프에 스팟 그래프 추가하기</a> 영상에
        소개되어 있습니다. 직접 Analyzer 모듈을 수정해서 다양한 그래프를 추가 할 수도 있습니다.</p>


    </google-codelab-step>

    <google-codelab-step label="정리" duration="1">
      <p>간단하게 smtm을 설치하고 시뮬레이션을 실행해보았습니다. 그리고 시뮬레이션 결과를 확인해 보았습니다.</p>
      <p>기본 제공되는 전략을 참고하여 직접 전략을 만들어 보세요. 그리고 대량 시뮬레이션을 통해서 전략을 최적화 보세요.</p>
      <p>실시간 거래에서는 어떻게 동작하는지 데모 모드를 통해서 텔레그램 컨트롤러를 사용해 보는것도 좋습니다.</p>
      <p>해당 프로그램은 오픈소스로 무료 제공되고 있으며, 필요에 따라 자유롭게 수정하여 사용이 가능합니다.</p>
      <h2 is-upgraded>더 알아보기</h2>
      <ul>
        <li><a href="https://youtu.be/lwrMAJzy8V4" target="_blank">썰 - 왜 암호화폐인가</a></li>
        <li><a href="https://youtu.be/FR14ZodyDqA" target="_blank">smtm 사용팁 - 그래프에 스팟 그래프 추가하기</a></li>
        <li><a href="https://youtu.be/i6g2VhPl7hQ" target="_blank">암호화폐 자동매매 시스템 smtm - 대량 시뮬레이션</a></li>
        <li><a href="https://youtu.be/la-IGHgI95g" target="_blank">무료 오픈소스 암호화폐 자동매매 시스템 smtm 바로 써보기</a></li>
      </ul>


    </google-codelab-step>

  </google-codelab>

  <script src="https://storage.googleapis.com/claat-public/native-shim.js"></script>
  <script src="https://storage.googleapis.com/claat-public/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/claat-public/prettify.js"></script>
  <script src="https://storage.googleapis.com/claat-public/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>
</body>

</html>